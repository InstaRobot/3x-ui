# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–æ—Ä–∫–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–Ω–µ—Å—ë–Ω–Ω—ã–µ –≤ –¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–ü—É–±–ª–∏—á–Ω–æ–µ API](#–ø—É–±–ª–∏—á–Ω–æ–µ-api)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏–∑–º–µ–Ω–µ–Ω–∏–π)
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–¥–µ—Ç–∞–ª–∏)

---

## –ü—É–±–ª–∏—á–Ω–æ–µ API

### –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø—É–±–ª–∏—á–Ω–æ–µ API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ `/panel`. API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –±–∏–ª–ª–∏–Ω–≥–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–±–∞—É–Ω–¥–æ–≤**: —Å–ø–∏—Å–æ–∫ –∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ø–æ–¥—Å—á—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ–Ω–ª–∞–π–Ω-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: —á–µ—Ä–µ–∑ API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö (–±–µ–∑ session cookies)

### –ú–∞—Ä—à—Ä—É—Ç—ã

–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å: `{basePath}api/*`

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/api/ping` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) |
| `GET` | `/api/list` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω–±–∞—É–Ω–¥–æ–≤ |
| `GET` | `/api/get/:id` | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–±–∞—É–Ω–¥ –ø–æ ID |
| `POST` | `/api/addClient` | –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞(–æ–≤) |
| `POST` | `/api/:id/delClient/:clientId` | –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ |
| `POST` | `/api/updateClient/:clientId` | –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ |
| `GET` | `/api/stats/users` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| `GET` | `/api/stats/online` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

API –∑–∞—â–∏—â–µ–Ω–æ –∫–ª—é—á–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export XUI_API_KEY="your-secret-key-here"
```

–ö–ª—é—á –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:
- `X-API-Key: <token>`
- `Authorization: Bearer <token>`

–ï—Å–ª–∏ `XUI_API_KEY` –Ω–µ –∑–∞–¥–∞–Ω, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API –∫–ª—é—á –æ—Ç–∫–ª—é—á–µ–Ω–∞.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å curl –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ [public-api.md](./public-api.md).

–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä:
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω–±–∞—É–Ω–¥–æ–≤
curl -H "X-API-Key: $XUI_API_KEY" http://localhost:2053/api/list

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl -H "X-API-Key: $XUI_API_KEY" http://localhost:2053/api/stats/users

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (–±–µ–∑ –∫–ª—é—á–∞)
curl http://localhost:2053/api/ping
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

#### 1. `web/controller/public_api.go`

–ù–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø—É–±–ª–∏—á–Ω–æ–µ API:

```go
type PublicAPIController struct {
    BaseController
    inboundController *InboundController
    inboundService    service.InboundService
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª—è–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`stats/users`, `stats/online`)
- –ù–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

**–õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á—ë—Ç–∞:**
- `stats/users`: –ø–æ–¥—Å—á—ë—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ `settings.clients` (VMESS/VLESS/Trojan/SS) –∏ `settings.peers` (WireGuard)
- `stats/online`: –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω e-mail –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞ xray —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

#### 2. `docs/public-api.md`

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### 1. `web/middleware/api_key_auth.go`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- Middleware —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ** –¥–ª—è –Ω–æ–≤–æ–≥–æ API (`{basePath}api/*`)
- –°—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã `/panel/api/*` –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è `/api/ping` (–¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

**–ë—ã–ª–æ:**
```go
if !strings.HasPrefix(path, basePath+"panel/api/") {
    c.Next()
    return
}
```

**–°—Ç–∞–ª–æ:**
```go
allowed := strings.HasPrefix(path, basePath+"api/")
if !allowed {
    c.Next()
    return
}

// –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è ping
if path == pingPath {
    c.Next()
    return
}
```

#### 2. `web/web.go`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –£–¥–∞–ª—ë–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π middleware `engine.Use(middleware.ApiKeyAuthMiddleware())`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä–æ–≥–æ API

**–ö–æ–¥:**
```go
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ API –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ '/panel'
trimmedBase := strings.TrimRight(basePath, "/")
controller.NewPublicAPIController(engine.Group(trimmedBase))
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò–∑–æ–ª—è—Ü–∏—è scope**: middleware –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –Ω–æ–≤—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Å—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
3. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º `XUI_API_KEY`
4. **Session reuse**: –ø—Ä–∏ –≤–∞–ª–∏–¥–Ω–æ–º –∫–ª—é—á–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è

### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

–ù–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É:
- `getInbounds`, `getInbound` ‚Üí –ø—Ä—è–º–æ–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
- `addClient`, `delClient`, `updateClient` ‚Üí –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ç–æ–π –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π
- `InboundService.GetAllInbounds()` ‚Üí –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å basePath

–í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç `basePath` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–∞–Ω–µ–ª–∏:
- –ï—Å–ª–∏ `basePath = "/"` ‚Üí `/api/list`
- –ï—Å–ª–∏ `basePath = "/x-ui/"` ‚Üí `/x-ui/api/list`

### Docker

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Docker –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```yaml
# docker-compose.yml
services:
  3x-ui:
    environment:
      - XUI_API_KEY=your-secret-key
```

–∏–ª–∏

```bash
docker run -e XUI_API_KEY=your-secret-key ...
```

---

## –û—Ç–ª–∏—á–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

### –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- ‚úÖ –°—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã `/panel/api/*` —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å xray –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

- ‚ú® –ù–æ–≤—ã–π –Ω–∞–±–æ—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ `{basePath}api/*`
- ‚ú® –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API –∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚ú® –ê–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚ú® –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è API
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ API –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ
4. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ `PublicAPIController`

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞–¥–∞–π—Ç–µ API –∫–ª—é—á:
```bash
export XUI_API_KEY="my-secret-key-123"
```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–Ω–µ–ª—å:
```bash
systemctl restart x-ui
# –∏–ª–∏
docker-compose restart
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
```bash
curl http://your-server:2053/api/ping
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: ok
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

–ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è Prometheus/Grafana:

```bash
#!/bin/bash
API_KEY="your-key"
HOST="localhost:2053"

# –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
users=$(curl -s -H "X-API-Key: $API_KEY" http://$HOST/api/stats/users | jq '.obj.count')
online=$(curl -s -H "X-API-Key: $API_KEY" http://$HOST/api/stats/online | jq '.obj.count')

echo "xui_total_users $users"
echo "xui_online_users $online"
```

### –ë–∏–ª–ª–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

```python
import requests

class XUIClient:
    def __init__(self, base_url, api_key):
        self.base_url = base_url
        self.headers = {"X-API-Key": api_key}
    
    def add_user(self, inbound_id, email, total_gb=0, expiry_time=0):
        data = {
            "id": inbound_id,
            "settings": json.dumps({
                "clients": [{
                    "id": str(uuid.uuid4()),
                    "email": email,
                    "totalGB": total_gb,
                    "expiryTime": expiry_time,
                    "enable": True
                }]
            })
        }
        r = requests.post(
            f"{self.base_url}/api/addClient",
            json=data,
            headers=self.headers
        )
        return r.json()
    
    def get_stats(self):
        users = requests.get(
            f"{self.base_url}/api/stats/users",
            headers=self.headers
        ).json()
        online = requests.get(
            f"{self.base_url}/api/stats/online",
            headers=self.headers
        ).json()
        return {
            "total": users["obj"]["count"],
            "online": online["obj"]["count"]
        }
```

---

## –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è WireGuard peers —á–µ—Ä–µ–∑ API
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º
- [ ] Webhooks –¥–ª—è —Å–æ–±—ã—Ç–∏–π (–Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∏ —Ç.–¥.)
- [ ] Rate limiting –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

## Changelog

### v1.0 (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)

- ‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–µ API `{basePath}api/*`
- ‚ú® –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `XUI_API_KEY`
- ‚ú® –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- ‚ú® –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (`stats/users`, `stats/online`)
- üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- üîß –ò–∑–º–µ–Ω—ë–Ω scope middleware API key auth
- üîß –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ —Ä–æ—É—Ç–µ—Ä–µ

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ–¥ —Ç–æ–π –∂–µ –ª–∏—Ü–µ–Ω–∑–∏–µ–π, —á—Ç–æ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.

